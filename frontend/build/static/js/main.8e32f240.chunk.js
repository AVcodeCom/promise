(this["webpackJsonpdo-list"]=this["webpackJsonpdo-list"]||[]).push([[0],{23:function(e,t,n){e.exports=n(41)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),i=n(3),s=n(4),u=n(7),l=n(5),p=n(6),d=n(12),f=(n(28),function(e){return e.list.map((function(t){return r.a.createElement("li",{className:"listRow",key:t.id},r.a.createElement("span",{className:"yes"===t.status?"yes":"no"},t.description),r.a.createElement("a",{href:"###",onClick:function(){return e.toCompleted(t.id)}},"\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e"))}))}),m=(n(29),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).inputValue=Object(a.createRef)(),n.inputClick=n.inputClick.bind(Object(d.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"inputClick",value:function(){this.props.newPointList(this.inputValue.current.value),this.inputValue.current.value=" "}},{key:"render",value:function(){var e=this.props,t=e.list;e.newList;return r.a.createElement("section",{className:"input"},r.a.createElement("h3",null,"\u041d\u0430\u0434\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"),r.a.createElement("input",{ref:this.inputValue,type:"text",value:this.value,placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443"}),r.a.createElement("button",{onClick:this.inputClick},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),r.a.createElement("ul",null,r.a.createElement(f,{list:t})))}}]),t}(a.Component)),h=(n(30),function(){return r.a.createElement("header",null,r.a.createElement("h1",{className:"logo"},"Promise"))}),w=(n(31),function(e){var t=e.completedList;return r.a.createElement("section",{className:"perf"},r.a.createElement("h3",null," \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e "),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.description)}))))}),v=(n(32),function(){return r.a.createElement("footer",null)}),E=(n(33),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).neweEmaildValue=Object(a.createRef)(),n.newLoginValue=Object(a.createRef)(),n.newPasswordValue=Object(a.createRef)(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.registration;return r.a.createElement("div",{className:"autor"},r.a.createElement("h5",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f "),r.a.createElement("input",{ref:this.neweEmaildValue,type:"email",name:"email",placeholder:"\u043f\u043e\u0447\u0442\u0430"}),r.a.createElement("input",{ref:this.newLoginValue,type:"text",name:"login",placeholder:"\u043b\u043e\u0433\u0438\u043d"}),r.a.createElement("input",{ref:this.newPasswordValue,type:"text",name:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("button",{onClick:function(){return t(e.neweEmaildValue.current.value,e.newLoginValue.current.value,e.newPasswordValue.current.value)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))}}]),t}(a.Component)),g=n(1),b=n.n(g),O=(n(35),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).loginValue=Object(a.createRef)(),n.passwordValue=Object(a.createRef)(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.autorisation,a=t.newList;return r.a.createElement("div",{className:"autor"},r.a.createElement("h5",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f "),r.a.createElement("input",{ref:this.loginValue,type:"text",name:"login",placeholder:"\u043b\u043e\u0433\u0438\u043d"}),r.a.createElement("input",{ref:this.passwordValue,type:"text",name:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("button",{onClick:function(){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(n(e.loginValue.current.value,e.passwordValue.current.value));case 2:return t.next=4,b.a.awrap(a());case 4:case"end":return t.stop()}}))}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))}}]),t}(a.Component)),y=n(13),j=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAutorisation,n=e.newTokenFromRefresh,a=e.newList;t&&a(),n()}},{key:"render",value:function(){var e=this.props,t=e.isAutorisation,n=e.autorisation,a=e.registration,o=e.newList,c=e.list,i=e.completedList,s=e.newPointList;return console.log(c),r.a.createElement("div",{className:"wrap"},r.a.createElement(h,null),t?r.a.createElement("main",{className:"main"},r.a.createElement("article",null,r.a.createElement(m,{list:c,newPointList:s,newList:o})),r.a.createElement("article",null,r.a.createElement(w,{completedList:i}))):r.a.createElement("article",null,r.a.createElement(O,{autorisation:n,newList:o}),r.a.createElement(E,{registration:a})),r.a.createElement(v,null))}}]),t}(a.Component),k=Object(y.b)((function(e){return{isAutorisation:e.tokenReducer.isAutorisation,token:e.tokenReducer.token,list:e.listReducer.list,completedList:e.completedListReducer.completedList}}),(function(e){return{autorisation:function(t,n){return e(function(e,t){return function(n){var a,r,o,c;return b.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new FormData).append("username",e),a.append("password",t),r={method:"POST",body:a},i.next=6,b.a.awrap(fetch("http://77.244.65.15:3527/api/v1/data/auth/jwt/create/",r));case 6:return o=i.sent,i.next=9,b.a.awrap(o.json());case 9:if(c=i.sent,!o.ok){i.next=21;break}return i.next=13,b.a.awrap(localStorage.setItem("Authorization","Bearer ".concat(c.access)));case 13:return i.next=15,b.a.awrap(localStorage.setItem("remember","true"));case 15:return i.next=17,b.a.awrap(localStorage.setItem("tokenData",Date.now()));case 17:return i.next=19,b.a.awrap(localStorage.setItem("refresh",c.refresh));case 19:return i.next=21,b.a.awrap(n({type:"PUT_NEW_TOKEN",payload:"Bearer ".concat(c.access)}));case 21:case"end":return i.stop()}}))}}(t,n))},registration:function(t,n,a){return e(function(e,t,n){return function(a){var r,o,c,i;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return(r=new FormData).append("username",n),r.append("password",t),r.append("email",e),o={method:"POST",body:r},s.next=7,b.a.awrap(fetch("http://77.244.65.15:3527/api/v1/data/auth/users/",o));case 7:return c=s.sent,s.next=10,b.a.awrap(c.json());case 10:return i=s.sent,console.log(i),s.next=14,b.a.awrap(a({type:"REGISTRATION"}));case 14:case"end":return s.stop()}}))}}(t,n,a))},newList:function(){return e((function(e){var t,n,a;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"GET",headers:{Authorization:localStorage.getItem("Authorization")}},r.next=3,b.a.awrap(fetch("http://77.244.65.15:3527/api/v1/data/promise/",t));case 3:return n=r.sent,r.next=6,b.a.awrap(n.json());case 6:return a=r.sent,r.next=9,b.a.awrap(e({type:"GET_LIST",payload:a.results}));case 9:case"end":return r.stop()}}))}))},newPointList:function(t){return e(function(e){return function(t){var n,a,r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,b.a.awrap(t({type:"PUT_NEW_POINT_LIST",payload:{id:Date.now(),description:e}}));case 2:return(n=new FormData).append("name","123"),n.append("description",e),a={body:n,headers:{Authorization:localStorage.getItem("Authorization")},method:"POST"},o.next=8,b.a.awrap(fetch("http://77.244.65.15:3527/api/v1/data/promise/new/",a));case 8:r=o.sent,console.log(r.json());case 10:case"end":return o.stop()}}))}}(t))},newTokenFromRefresh:function(){return e((function(e){var t,n,a,r,o,c,i;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t="true"===localStorage.getItem("remember"),n=localStorage.getItem("tokenData"),!t){s.next=21;break}if(!(Date.now()>=5e3*n)){s.next=21;break}return a=localStorage.getItem("refresh"),(r=new FormData).append("refresh",a),o={body:r,method:"POST"},s.next=10,b.a.awrap(fetch("http://77.244.65.15:3527/api/v1/data/auth/jwt/refresh/",o));case 10:if(401!==(c=s.sent).status){s.next=14;break}return s.next=14,b.a.awrap(e({type:"ERROR_REQUEST"}));case 14:return s.next=16,b.a.awrap(c.json());case 16:return i=s.sent,s.next=19,b.a.awrap(localStorage.setItem("Authorization","Bearer ".concat(i.access)));case 19:return s.next=21,b.a.awrap(e({type:"PUT_NEW_TOKEN_FROM_REFRESH",payload:"Bearer ".concat(i.access)}));case 21:case"end":return s.stop()}}))}))}}}))(j),x=(n(40),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function R(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var T=n(8),L=n(20),S=n.n(L),N=n(21),_=n(9),I=localStorage.getItem("Authorization"),P={token:I,isAutorisation:null!==I},V=n(22),A={list:[]},C={completedList:[]},W=Object(T.c)({tokenReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_NEW_TOKEN":case"PUT_NEW_TOKEN_FROM_REFRESH":return Object(_.a)({},e,{token:t.payload,isAutorisation:!0});case"ERROR_REQUEST":return Object(_.a)({},e,{isAutorisation:!1});default:return e}},listReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LIST":return Object(_.a)({},e,{list:t.payload});case"PUT_NEW_POINT_LIST":return Object(_.a)({},e,{list:[t.payload].concat(Object(V.a)(e.list))});default:return e}},completedListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;arguments.length>1&&arguments[1];return e}}),D=Object(T.d)(W,Object(T.a)(S.a,N.a));c.a.render(r.a.createElement(y.a,{store:D},r.a.createElement(k,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");x?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):R(e)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.8e32f240.chunk.js.map